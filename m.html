<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>考试题目展示</title>

    <style>
        body { font-family: Arial; padding: 10px; margin: 0; background: #f4f4f4; }
        .container { background: #fff; padding: 16px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); max-width: 600px; margin: auto; }

        .question-number { font-weight: bold; margin-bottom: 5px; }
        .question-type { font-weight: bold; color: #007bff; margin-bottom: 5px; }
        .question-text { font-size: 18px; white-space: pre-line; margin-bottom: 15px; }

        .options div {
            background: #fafafa;
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: background 0.2s;
        }

        /* hover 效果 */
        .options div:hover { background: #f0f8ff; }

        /* 选中后变浅蓝色 */
        .option-selected {
            background: #cfe8ff !important;
            border-color: #7bbcff;
        }

        .nav-row {
            display: flex; align-items: center; justify-content: space-between;
            gap: 5px; margin-top: 15px; flex-wrap: wrap;
        }
        .btn {
            padding: 10px; border: none; border-radius: 8px;
            background: #007bff; color: white; font-size: 16px;
            flex-grow: 1; min-width: 80px; text-align: center;
        }
        #jumpInput { width: 60px; padding: 6px; font-size: 16px; border: 1px solid #ddd; border-radius: 6px; }
        #jumpBtn { background: #28a745; }
        .jump-group { display: flex; align-items: center; gap: 5px; flex-grow: 2; min-width: 120px; }

        #result { margin-top: 15px; font-weight: bold; font-size: 16px; color: #d9534f; white-space: pre-line; }
    </style>
</head>
<body>

<div class="container">
    <div class="question-number" id="questionNumber"></div>
    <div class="question-type" id="questionType"></div>
    <div class="question-text" id="questionText"></div>
    <div class="options" id="optionsBox"></div>

    <div class="nav-row">
        <button class="btn" onclick="prevQuestion()">上一题</button>
        <div class="jump-group">
            <input type="number" id="jumpInput" placeholder="题号" />
            <button id="jumpBtn" class="btn" onclick="jumpTo()">跳转</button>
        </div>
        <button class="btn" onclick="nextQuestion()">下一题</button>
    </div>

    <div id="result"></div>
</div>

<script>
    const questions = [
        {
            id: "846", text: "密码术语上，计数器值一定是随机数。", type: "single",
            options: [
                { key: "A", text: "正确", correct: false },
                { key: "B", text: "错误", correct: true }
            ]
        },
        {
            id: "1", text: "党的二十大主题是：高举中国特色社会主义伟大旗帜，（  ）、勇毅前行。", type: "single",
            options: [
                { key: "A", text: "踔厉奋发", correct: true },
                { key: "B", text: "奋勇向前", correct: false }
            ]
        },
        {
            id: "27", text: "党的二十大报告指出，不敢腐、（  ）、一体推进。", type: "multiple",
            options: [
                { key: "A", text: "不可腐", correct: false },
                { key: "B", text: "不能腐", correct: true },
                { key: "C", text: "不想腐", correct: true },
                { key: "D", text: "不愿腐", correct: false }
            ]
        }
    ];

    let currentIndex = 0;

    function loadQuestion() {
        const q = questions[currentIndex];

        document.getElementById("questionNumber").innerText = `题目 ${currentIndex + 1} / ${questions.length}`;
        document.getElementById("questionType").innerText =
            q.type === "single" ? "单项选择题" : q.type === "multiple" ? "多项选择题" : "判断题";

        document.getElementById("questionText").innerText = q.text;
        document.getElementById("result").innerText = "";

        const optionsBox = document.getElementById("optionsBox");
        optionsBox.innerHTML = "";

        q.options.forEach(op => {
            if (!op.text) return;

            const div = document.createElement("div");
            div.classList.add("option-item");

            if (q.type === "single") {
                div.innerHTML = `<input type="radio" name="opt" value="${op.key}" style="display:none;"> ${op.key}. ${op.text}`;
            } else {
                div.innerHTML = `<input type="checkbox" name="opt" value="${op.key}" style="display:none;"> ${op.key}. ${op.text}`;
            }

            div.addEventListener("click", () => {
                const input = div.querySelector("input");

                if (q.type === "single") {
                    document.querySelectorAll(".option-item").forEach(d => d.classList.remove("option-selected"));
                    document.querySelectorAll('input[name="opt"]').forEach(i => i.checked = false);

                    input.checked = true;
                    div.classList.add("option-selected");

                    checkAnswer();
                } else {
                    input.checked = !input.checked;

                    if (input.checked) {
                        div.classList.add("option-selected");
                    } else {
                        div.classList.remove("option-selected");
                    }
                }
            });

            optionsBox.appendChild(div);
        });

        if (q.type === "multiple") {
            let btn = document.createElement("button");
            btn.innerText = "确认";
            btn.className = "btn";
            btn.style.width = "100%";
            btn.style.background = "#17a2b8";
            btn.onclick = checkAnswer;
            optionsBox.appendChild(btn);
        }
    }

    function checkAnswer() {
        const q = questions[currentIndex];
        const result = document.getElementById("result");

        const correctKeys = q.options.filter(o => o.correct).map(o => o.key);

        let userAnswer = [];
        document.querySelectorAll('input[name="opt"]:checked').forEach(i => userAnswer.push(i.value));

        if (userAnswer.length === 0) {
            result.innerText = "请选择答案！";
            return;
        }

        const isCorrect = JSON.stringify(userAnswer.sort()) === JSON.stringify(correctKeys.sort());
        result.innerText = (isCorrect ? "✔ 回答正确！\n" : "✘ 回答错误！\n") +
            `正确答案：${correctKeys.join(", ")}`;
    }

    function prevQuestion() {
        if (currentIndex > 0) {
            currentIndex--;
            loadQuestion();
        }
    }

    function nextQuestion() {
        if (currentIndex < questions.length - 1) {
            currentIndex++;
            loadQuestion();
        }
    }

    function jumpTo() {
        const index = parseInt(document.getElementById("jumpInput").value) - 1;
        if (index >= 0 && index < questions.length) {
            currentIndex = index;
            loadQuestion();
        } else {
            alert("题号超出范围！");
        }
    }

    loadQuestion();
</script>
</body>
</html>
