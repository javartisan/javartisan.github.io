import{_ as k,b as g,s as v,r as _,o as d,c,a,e as s,w as I,t as p,j as b,v as w,p as C,k as y}from"./index-e4a2ddf0.js";const T=""+new URL("../unlogin_icon.png",import.meta.url).href;const x={data(){return{user:{avatar:"",defaultAvatar:"/unlogin_icon.png",nickname:"",username:"",sign:"",isLogin:!1},signInfo:{showCenter:!1,editable:!1},uploadImgUrl:[],uploadFiles:n=>{console.log("file = "+n),n.status="uploading",n.message="上传中...",g.upLoadFiles([n.file]).then(m=>{let u=m.data;n.status=u.code,u.code===1?(n.message="上传成功",n.file=u.data[0],g.updateUserInfo(null,u.data[0]).then(o=>{u.code!==1?v("上传头像失败！"):this.refreshUserInfo()})):n.message=u.message}).catch(m=>{console.log("err = "+m)})}}},methods:{goTo(n){this.$router.push(n)},changeSign(){this.signInfo.editable=!1,g.updateUserInfo(this.user.sign,null).then(n=>{n.data.code===1&&v("修改成功")})},refreshUserInfo(){g.userInfoInMy().then(n=>{if(n.data.code===1){let e=n.data.data;this.user.sign=e.sign,this.user.avatar=e.avatar,this.user.nickname=e.nickName,this.user.username=e.userName,this.user.isLogin=!0}else this.user.isLogin=!1})}},mounted(){this.refreshUserInfo()}},r=n=>(C("data-v-227e246a"),n=n(),y(),n),S={class:"user-box"},U={class:"user-info"},L={key:0,class:"info"},M=["src"],N={class:"user-desc"},B={key:0},F={class:"name"},V={key:1},A=r(()=>s("span",{class:"name"},"个性签名：",-1)),D={key:1,class:"login_div"},P=r(()=>s("img",{class:"unlogin_img",src:T},null,-1)),j={class:"user-list"},E=r(()=>s("span",null,"商品发布",-1)),R=r(()=>s("span",null,"商品管理",-1)),q=r(()=>s("span",null,"分享有礼",-1)),z=r(()=>s("span",null,"设备管理",-1)),G=r(()=>s("span",null,"个人设置",-1)),H=r(()=>s("span",null,"关于我们",-1));function J(n,e,m,u,o,i){const h=_("s-header"),f=_("van-uploader"),l=_("van-icon");return d(),c("div",S,[a(h,{name:"我的",showLeftIcon:!1}),s("div",U,[this.user.isLogin?(d(),c("div",L,[a(f,{"after-read":o.uploadFiles},{default:I(()=>[s("img",{src:o.user.avatar||o.user.defaultAvatar},null,8,M)]),_:1},8,["after-read"]),s("div",N,[s("span",null,"用户昵称："+p(o.user.nickname),1),s("span",null,"登录账号："+p(o.user.username),1),s("div",null,[o.signInfo.editable?(d(),c("div",V,[A,b(s("input",{style:{"background-color":"#646566"},"onUpdate:modelValue":e[1]||(e[1]=t=>o.user.sign=t),maxlength:"20"},null,512),[[w,o.user.sign]]),a(l,{name:"checked",onClick:i.changeSign},null,8,["onClick"])])):(d(),c("div",B,[s("span",F,"个性签名："+p(o.user.sign),1),a(l,{name:"edit",onClick:e[0]||(e[0]=t=>o.signInfo.editable=!0)})]))])])])):(d(),c("div",D,[P,s("div",null,[s("button",{onClick:e[2]||(e[2]=t=>i.goTo("/login"))},"登 录"),s("button",{onClick:e[3]||(e[3]=t=>i.goTo("/register"))},"注 册")])]))]),s("ul",j,[s("li",{class:"van-hairline--bottom",onClick:e[4]||(e[4]=t=>i.goTo("/add-sku"))},[E,a(l,{name:"arrow"})]),s("li",{class:"van-hairline--bottom",onClick:e[5]||(e[5]=t=>i.goTo("/manage-sku"))},[R,a(l,{name:"arrow"})]),s("li",{class:"van-hairline--bottom",onClick:e[6]||(e[6]=t=>i.goTo("/share-app",{from:"mine"}))},[q,a(l,{name:"arrow"})]),s("li",{class:"van-hairline--bottom",onClick:e[7]||(e[7]=t=>i.goTo("/device-manager",{from:"mine"}))},[z,a(l,{name:"arrow"})]),s("li",{onClick:e[8]||(e[8]=t=>i.goTo("/my-setting"))},[G,a(l,{name:"arrow"})]),s("li",{onClick:e[9]||(e[9]=t=>i.goTo("/my_about"))},[H,a(l,{name:"arrow"})])])])}const O=k(x,[["render",J],["__scopeId","data-v-227e246a"]]);export{O as default};
