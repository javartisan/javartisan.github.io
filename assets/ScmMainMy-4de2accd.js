import{_ as k,g as u,s as p,r as _,o as c,c as m,a as t,b as n,w as I,t as h,h as b,v as y,p as w,i as C}from"./index-2df86540.js";const L={data(){return{user:{avatar:"",defaultAvatar:"https://t7.baidu.com/it/u=2268267538,364165622&fm=193&f=GIF",nickname:"",username:"",sign:"",isLogin:!1},signInfo:{showCenter:!1,editable:!1},uploadImgUrl:[],uploadFiles:s=>{console.log("file = "+s),s.status="uploading",s.message="上传中...",u.upLoadFiles([s.file]).then(g=>{let i=g.data;s.status=i.code,i.code===1?(s.message="上传成功",s.file=i.data[0],u.updateUserInfo(null,i.data[0]).then(o=>{i.code!==1?p("上传头像失败！"):this.refreshUserInfo()})):s.message=i.message}).catch(g=>{console.log("err = "+g)})}}},methods:{goTo(s){this.$router.push(s)},changeAvatar(){alert("点击头像")},changeSign(){this.signInfo.editable=!1,u.updateUserInfo(this.user.sign,null).then(s=>{s.data.code===1&&p("修改成功")})},refreshUserInfo(){this.user.isLogin&&u.userInfoInMy().then(s=>{if(s.data.code===1){let e=s.data.data;this.user.sign=e.sign,this.user.avatar=e.avatar,this.user.nickname=e.nickName,this.user.username=e.userName}})}},mounted(){this.refreshUserInfo(),u.appInfo().then(s=>{s.data.code===1&&(this.user.isLogin=s.data.data.isLogin)}),console.log("this.user.isLogin = "+this.user.isLogin)}},d=s=>(w("data-v-22bf5576"),s=s(),C(),s),T={class:"user-box"},x={class:"user-info"},S={key:0,class:"info"},U=["src"],M={class:"user-desc"},F={key:0},N={class:"name"},A={key:1},B=d(()=>n("span",{class:"name"},"个性签名：",-1)),V={key:1,class:"login_div"},D={class:"user-list"},P=d(()=>n("span",null,"商品发布",-1)),E=d(()=>n("span",null,"商品管理",-1)),G=d(()=>n("span",null,"分享有礼",-1)),j=d(()=>n("span",null,"个人设置",-1)),q=d(()=>n("span",null,"关于我们",-1));function z(s,e,g,i,o,l){const f=_("s-header"),v=_("van-uploader"),r=_("van-icon");return c(),m("div",T,[t(f,{name:"我的",showLeftIcon:!1}),n("div",x,[this.user.isLogin?(c(),m("div",S,[t(v,{"after-read":o.uploadFiles},{default:I(()=>[n("img",{src:o.user.avatar||o.user.defaultAvatar},null,8,U)]),_:1},8,["after-read"]),n("div",M,[n("span",null,"用户昵称："+h(o.user.nickname),1),n("span",null,"登录账号："+h(o.user.username),1),n("div",null,[o.signInfo.editable?(c(),m("div",A,[B,b(n("input",{style:{"background-color":"#646566"},"onUpdate:modelValue":e[1]||(e[1]=a=>o.user.sign=a),maxlength:"20"},null,512),[[y,o.user.sign]]),t(r,{name:"checked",onClick:l.changeSign},null,8,["onClick"])])):(c(),m("div",F,[n("span",N,"个性签名："+h(o.user.sign),1),t(r,{name:"edit",onClick:e[0]||(e[0]=a=>o.signInfo.editable=!0)})]))])])])):(c(),m("div",V,[n("div",null,[n("button",{onClick:e[2]||(e[2]=a=>l.goTo("/login"))},"登 录")])]))]),n("ul",D,[n("li",{class:"van-hairline--bottom",onClick:e[3]||(e[3]=a=>l.goTo("/add-sku"))},[P,t(r,{name:"arrow"})]),n("li",{class:"van-hairline--bottom",onClick:e[4]||(e[4]=a=>l.goTo("/manage-sku"))},[E,t(r,{name:"arrow"})]),n("li",{class:"van-hairline--bottom",onClick:e[5]||(e[5]=a=>l.goTo("/share-app",{from:"mine"}))},[G,t(r,{name:"arrow"})]),n("li",{onClick:e[6]||(e[6]=a=>l.goTo("/my-setting"))},[j,t(r,{name:"arrow"})]),n("li",{onClick:e[7]||(e[7]=a=>l.goTo("/my_about"))},[q,t(r,{name:"arrow"})])])])}const J=k(L,[["render",z],["__scopeId","data-v-22bf5576"]]);export{J as default};
