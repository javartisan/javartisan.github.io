import{_ as k,g as u,s as g,r as h,o as c,c as m,a,b as n,w as I,t as p,h as b,v as C,p as y,i as w}from"./index-42169841.js";const T={data(){return{user:{avatar:"",defaultAvatar:"https://t7.baidu.com/it/u=2268267538,364165622&fm=193&f=GIF",nickname:"",username:"",sign:""},signInfo:{showCenter:!1,editable:!1},uploadImgUrl:[],uploadFiles:e=>{console.log("file = "+e),e.status="uploading",e.message="上传中...",u.upLoadFiles([e.file]).then(_=>{let i=_.data;e.status=i.code,i.code===1?(e.message="上传成功",e.file=i.data[0],u.updateUserInfo(null,i.data[0]).then(t=>{i.code!==1?g("上传头像失败！"):this.refreshUserInfo()})):e.message=i.message}).catch(_=>{console.log("err = "+_)})}}},methods:{goTo(e){this.$router.push(e)},changeAvatar(){alert("点击头像")},changeSign(){this.signInfo.editable=!1,u.updateUserInfo(this.user.sign,null).then(e=>{e.data.code===1&&g("修改成功")})},refreshUserInfo(){this.$store.isLogin&&u.userInfoInMy().then(e=>{if(e.data.code===1){let s=e.data.data;this.user.sign=s.sign,this.user.avatar=s.avatar,this.user.nickname=s.nickName,this.user.username=s.userName}})}},mounted(){this.refreshUserInfo(),u.appInfo().then(e=>{e.data.code===1&&(this.appName=e.data.data.appName,this.noticeContent=e.data.data.noticeContent,this.$store.isLogin=e.data.data.isLogin)})}},d=e=>(y("data-v-490789e8"),e=e(),w(),e),x={class:"user-box"},S={class:"user-info"},U={key:0,class:"info"},L=["src"],M={class:"user-desc"},N={key:0},F={class:"name"},A={key:1},B=d(()=>n("span",{class:"name"},"个性签名：",-1)),V={key:1,class:"login_div"},D={class:"user-list"},P=d(()=>n("span",null,"商品发布",-1)),E=d(()=>n("span",null,"商品管理",-1)),G=d(()=>n("span",null,"分享有礼",-1)),j=d(()=>n("span",null,"个人设置",-1)),q=d(()=>n("span",null,"关于我们",-1));function z(e,s,_,i,t,l){const v=h("s-header"),f=h("van-uploader"),r=h("van-icon");return c(),m("div",x,[a(v,{name:"我的",showLeftIcon:!1}),n("div",S,[this.$store.isLogin?(c(),m("div",U,[a(f,{"after-read":t.uploadFiles},{default:I(()=>[n("img",{src:t.user.avatar||t.user.defaultAvatar},null,8,L)]),_:1},8,["after-read"]),n("div",M,[n("span",null,"用户昵称："+p(t.user.nickname),1),n("span",null,"登录账号："+p(t.user.username),1),n("div",null,[t.signInfo.editable?(c(),m("div",A,[B,b(n("input",{style:{"background-color":"#646566"},"onUpdate:modelValue":s[1]||(s[1]=o=>t.user.sign=o),maxlength:"20"},null,512),[[C,t.user.sign]]),a(r,{name:"checked",onClick:l.changeSign},null,8,["onClick"])])):(c(),m("div",N,[n("span",F,"个性签名："+p(t.user.sign),1),a(r,{name:"edit",onClick:s[0]||(s[0]=o=>t.signInfo.editable=!0)})]))])])])):(c(),m("div",V,[n("div",null,[n("button",{onClick:s[2]||(s[2]=o=>l.goTo("/login"))},"登 录")])]))]),n("ul",D,[n("li",{class:"van-hairline--bottom",onClick:s[3]||(s[3]=o=>l.goTo("/add-sku"))},[P,a(r,{name:"arrow"})]),n("li",{class:"van-hairline--bottom",onClick:s[4]||(s[4]=o=>l.goTo("/manage-sku"))},[E,a(r,{name:"arrow"})]),n("li",{class:"van-hairline--bottom",onClick:s[5]||(s[5]=o=>l.goTo("/share-app",{from:"mine"}))},[G,a(r,{name:"arrow"})]),n("li",{onClick:s[6]||(s[6]=o=>l.goTo("/my-setting"))},[j,a(r,{name:"arrow"})]),n("li",{onClick:s[7]||(s[7]=o=>l.goTo("/my_about"))},[q,a(r,{name:"arrow"})])])])}const J=k(T,[["render",z],["__scopeId","data-v-490789e8"]]);export{J as default};
