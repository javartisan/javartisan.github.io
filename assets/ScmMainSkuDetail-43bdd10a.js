import{_ as L,g as d,s as p,q as N,r as a,o as u,c as h,a as c,b as o,w as _,t as i,f as k,x as B,F as v,d as q,e as V}from"./index-4c061b5e.js";function m(s,e,l){if(e.length===0?e=s.text:e=e+">"+s.text,s.children)for(let f=0,t=s.children;f<t.length;f++){let n=t[f];m(n,e,l)}else l[s.value]=e}const w={value2TextLevelN(s){let e={};for(let l=0;l<s.length;l++)m(s[l],"",e);return e}};const W={data(){return{existSku:!0,skuInfo:{},shareConfig:{showShare:!1,options:[{name:"微信",icon:"wechat",id:"wechat"},{name:"复制链接",icon:"link",id:"link"},{name:"分享海报",icon:"poster",id:"poster"},{name:"二维码",icon:"qrcode",id:"qrcode"}]},bubbleStar:{offset:{x:320,y:620}},cate2CodeMap:{},addr3CodeMap:{}}},methods:{backToParentPage(){this.$router.go(-1)},onClickShareDialog(){this.shareConfig.showShare=!0},onClickShare(s){this.shareConfig.showShare=!1,navigator.clipboard.writeText(window.location)},clickSkuId(){alert("this.$route.params.sku_id = "+this.$route.params.sku_id)},followedClick(){console.log("this.$route.params.sku_id = "+this.$route.params.sku_id),d.followSku(this.$route.params.sku_id,!this.skuInfo.followed).then(s=>{s.data.code===1&&(this.skuInfo.followed=!this.skuInfo.followed)})},clickCopyWxId(){navigator.clipboard.writeText(this.skuInfo.wechatId),p("微信账号复制成功！")},imagePreview(){N({images:this.skuInfo.thumbs,startPosition:1})}},computed:{followed(){return this.skuInfo.followed?"已关注":"关注"}},mounted(){let s=this.$route.params.sku_id;d.skuDetail(s).then(e=>{e.data.code===1&&(e.data.data==null?(p("商品不存在"),this.existSku=!1):this.skuInfo=e.data.data)}),d.metaCate().then(e=>{if(e.data.code===1){let l=e.data.data;this.cate2CodeMap=w.value2TextLevelN(l)}}),d.metaAddr().then(e=>{if(e.data.code===1){let l=e.data.data;this.addr3CodeMap=w.value2TextLevelN(l)}}),d.addSkuEvent(s,1).then(e=>{})}},E={key:0,class:"skuDetail"},F=["src"],R={class:"viewed"},U={class:"viewed-txt"},A=o("hr",null,null,-1),j={style:{display:"block"}},z=["href"],G={style:{display:"block"}},H={style:{display:"block"}},J={style:{display:"block"}},K={style:{display:"block"}},O=o("hr",null,null,-1),Q={class:"followed-icon"},X={key:1};function Y(s,e,l,f,t,n){const b=a("van-nav-bar"),C=a("van-swipe-item"),g=a("van-swipe"),x=a("van-tag"),y=a("van-text-ellipsis"),I=a("van-floating-bubble"),S=a("van-cell"),T=a("van-share-sheet"),M=a("van-empty");return u(),h(v,null,[c(b,{title:"详情页","left-text":"返回","right-text":"分享","left-arrow":"",onClickLeft:n.backToParentPage,onClickRight:n.onClickShareDialog},null,8,["onClickLeft","onClickRight"]),t.existSku?(u(),h("div",E,[o("div",null,[c(g,{autoplay:"2000"},{default:_(()=>[(u(!0),h(v,null,q(t.skuInfo.thumbs,(r,P)=>(u(),V(C,{key:P},{default:_(()=>[o("img",{src:r,onClick:e[0]||(e[0]=(...D)=>n.imagePreview&&n.imagePreview(...D))},null,8,F)]),_:2},1024))),128))]),_:1})]),o("div",R,[o("span",U,"浏览次数："+i(t.skuInfo.viewCount),1)]),o("div",null,[o("h3",null,i(t.skuInfo.title),1),o("p",null,i(t.skuInfo.desc),1),c(x,{plain:"",type:"primary"},{default:_(()=>[k(i(t.cate2CodeMap[t.skuInfo.cate2Code]),1)]),_:1}),A,o("label",j,[k("联系电话："),o("a",{href:"tel:"+t.skuInfo.telNumber},"点击呼叫",8,z)]),o("label",{style:{display:"block"},id:"wxId",onClick:e[2]||(e[2]=(...r)=>n.clickCopyWxId&&n.clickCopyWxId(...r))},[k(" 微信账号："),o("a",{onClick:e[1]||(e[1]=B(()=>{},["prevent"])),href:"#"},"点击复制")]),o("label",G,"联系地址："+i(t.addr3CodeMap[t.skuInfo.addr3Code]),1),o("label",H,"商品数量："+i(t.skuInfo.count),1),o("label",J,"期望价格："+i(t.skuInfo.price),1),o("label",K,"发布日期："+i(t.skuInfo.createdDate),1),O,c(y,{class:"article-text",content:t.skuInfo.article,"expand-text":"展开",rows:"3","collapse-text":"收起"},null,8,["content"])]),o("div",Q,[c(I,{offset:t.bubbleStar.offset,"onUpdate:offset":e[3]||(e[3]=r=>t.bubbleStar.offset=r),axis:"xy",onClick:n.followedClick},{default:_(()=>[k(i(n.followed),1)]),_:1},8,["offset","onClick"])]),o("div",null,[c(S,{title:"显示分享面板"}),c(T,{show:t.shareConfig.showShare,"onUpdate:show":e[4]||(e[4]=r=>t.shareConfig.showShare=r),title:"立即分享给好友",options:t.shareConfig.options,onSelect:n.onClickShare},null,8,["show","options","onSelect"])])])):(u(),h("div",X,[c(M,{description:"商品已下架！"})]))],64)}const $=L(W,[["render",Y]]);export{$ as default};
