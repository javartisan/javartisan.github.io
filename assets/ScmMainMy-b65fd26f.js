import{_ as k,b as g,s as p,r as m,o as u,c as d,a as i,e as n,w as b,t as h,j as I,v as y,p as w,k as C}from"./index-29532c47.js";const x=""+new URL("../unlogin_icon.png",import.meta.url).href;const S={data(){return{user:{avatar:"",defaultAvatar:"/unlogin_icon.png",nickname:"",username:"",sign:"",isLogin:!1},signInfo:{showCenter:!1,editable:!1},uploadImgUrl:[],uploadFiles:e=>{console.log("file = "+e),e.status="uploading",e.message="上传中...",g.upLoadFiles([e.file]).then(_=>{let t=_.data;e.status=t.code,t.code===1?(e.message="上传成功",e.file=t.data[0],g.updateUserInfo(null,t.data[0]).then(o=>{t.code!==1?p("上传头像失败！"):this.refreshUserInfo()})):e.message=t.message}).catch(_=>{console.log("err = "+_)})}}},methods:{goTo(e){this.$router.push(e)},changeSign(){this.signInfo.editable=!1,g.updateUserInfo(this.user.sign,null).then(e=>{e.data.code===1&&p("修改成功")})},refreshUserInfo(){g.userInfoInMy().then(e=>{if(e.data.code===1){let s=e.data.data;this.user.sign=s.sign,this.user.avatar=s.avatar,this.user.nickname=s.nickName,this.user.username=s.userName,this.user.isLogin=!0}else this.user.isLogin=!1})}},mounted(){this.refreshUserInfo()}},c=e=>(w("data-v-90b45b06"),e=e(),C(),e),T={class:"user-box"},U={class:"user-info"},L={key:0,class:"info"},M=["src"],N={class:"user-desc"},B={key:0},F={class:"name"},V={key:1},A=c(()=>n("span",{class:"name"},"个性签名：",-1)),D={key:1,class:"login_div"},P=c(()=>n("img",{class:"unlogin_img",src:x},null,-1)),j={class:"user-list"},E=c(()=>n("span",null,"商品管理",-1)),R=c(()=>n("span",null,"设备管理",-1)),q=c(()=>n("span",null,"关于我们",-1));function z(e,s,_,t,o,r){const v=m("s-header"),f=m("van-uploader"),l=m("van-icon");return u(),d("div",T,[i(v,{name:"我的",showLeftIcon:!1}),n("div",U,[this.user.isLogin?(u(),d("div",L,[i(f,{"after-read":o.uploadFiles},{default:b(()=>[n("img",{src:o.user.avatar||o.user.defaultAvatar},null,8,M)]),_:1},8,["after-read"]),n("div",N,[n("span",null,"用户昵称："+h(o.user.nickname),1),n("span",null,"登录账号："+h(o.user.username),1),n("div",null,[o.signInfo.editable?(u(),d("div",V,[A,I(n("input",{style:{"background-color":"#646566"},"onUpdate:modelValue":s[1]||(s[1]=a=>o.user.sign=a),maxlength:"20"},null,512),[[y,o.user.sign]]),i(l,{name:"checked",onClick:r.changeSign},null,8,["onClick"])])):(u(),d("div",B,[n("span",F,"个性签名："+h(o.user.sign),1),i(l,{name:"edit",onClick:s[0]||(s[0]=a=>o.signInfo.editable=!0)})]))])])])):(u(),d("div",D,[P,n("div",null,[n("button",{onClick:s[2]||(s[2]=a=>r.goTo("/login"))},"登 录"),n("button",{onClick:s[3]||(s[3]=a=>r.goTo("/register"))},"注 册")])]))]),n("ul",j,[n("li",{class:"van-hairline--bottom",onClick:s[4]||(s[4]=a=>r.goTo("/manage-sku"))},[E,i(l,{name:"arrow"})]),n("li",{class:"van-hairline--bottom",onClick:s[5]||(s[5]=a=>r.goTo("/device-manager",{from:"mine"}))},[R,i(l,{name:"arrow"})]),n("li",{onClick:s[6]||(s[6]=a=>r.goTo("/my_about"))},[q,i(l,{name:"arrow"})])])])}const H=k(S,[["render",z],["__scopeId","data-v-90b45b06"]]);export{H as default};
