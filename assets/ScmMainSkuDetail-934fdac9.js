import{_ as M,b as d,s as _,x as P,y as p,r as l,o as c,c as u,a as i,d as s,w as h,t as n,q as D,g as k,z as L,F as N,e as B,f as V}from"./index-06ee3335.js";import{c as q}from"./constant-777de380.js";const W={data(){return{existSku:!0,skuInfo:{},shareConfig:{showShare:!1,options:[{name:"微信",icon:"wechat",id:"wechat"},{name:"复制链接",icon:"link",id:"link"},{name:"分享海报",icon:"poster",id:"poster"},{name:"二维码",icon:"qrcode",id:"qrcode"}]},bubbleStar:{offset:{x:320,y:620}},cate2CodeMap:{},addr3CodeMap:{}}},methods:{backToParentPage(){this.$router.go(-1)},onClickShareDialog(){this.shareConfig.showShare=!0},onClickShare(a){this.shareConfig.showShare=!1,navigator.clipboard.writeText(window.location)},clickSkuId(){alert("this.$route.params.sku_id = "+this.$route.params.sku_id)},followedClick(){console.log("this.$route.params.sku_id = "+this.$route.params.sku_id),d.followSku(this.$route.params.sku_id,!this.skuInfo.followed).then(a=>{a.data.code===1&&(this.skuInfo.followed=!this.skuInfo.followed)})},clickCopyWxId(){alert(this.skuInfo.wechatId),navigator.clipboard.writeText(this.skuInfo.wechatId),_("微信账号复制成功！")},imagePreview(){P({images:this.skuInfo.thumbs,startPosition:1})}},computed:{followed(){return this.skuInfo.followed?"已关注":"关注"},skuTransStatus(){const a=q.transStatus[this.skuInfo.skuTransStatus];return a??null}},mounted(){let a=this.$route.params.sku_id;d.skuDetail(a).then(e=>{e.data.code===1&&(e.data.data==null?(_("商品不存在"),this.existSku=!1):this.skuInfo=e.data.data)}),d.metaCate().then(e=>{if(e.data.code===1){let f=e.data.data;this.cate2CodeMap=p.value2TextLevelN(f)}}),d.metaAddr().then(e=>{if(e.data.code===1){let f=e.data.data;this.addr3CodeMap=p.value2TextLevelN(f)}}),d.addSkuEvent(a,1).then(e=>{})}},E={key:0,class:"skuDetail"},F=["src"],R={class:"viewed"},U={class:"viewed-txt"},z=s("hr",null,null,-1),A={key:0},j={style:{display:"block"}},G=["href"],H={style:{display:"block"}},J={style:{display:"block"}},K={style:{display:"block"}},O={style:{display:"block"}},Q=s("hr",null,null,-1),X={class:"followed-icon"},Y={key:1};function Z(a,e,f,$,t,o){const m=l("van-nav-bar"),v=l("van-swipe-item"),w=l("van-swipe"),C=l("van-tag"),b=l("van-text-ellipsis"),g=l("van-floating-bubble"),x=l("van-cell"),S=l("van-share-sheet"),y=l("van-empty");return c(),u("div",null,[i(m,{title:"详情页","left-text":"返回","right-text":"分享","left-arrow":"",onClickLeft:o.backToParentPage,onClickRight:o.onClickShareDialog},null,8,["onClickLeft","onClickRight"]),t.existSku?(c(),u("div",E,[s("div",null,[i(w,{autoplay:"2000"},{default:h(()=>[(c(!0),u(N,null,B(t.skuInfo.thumbs,(r,I)=>(c(),V(v,{key:I},{default:h(()=>[s("img",{src:r,onClick:e[0]||(e[0]=(...T)=>o.imagePreview&&o.imagePreview(...T))},null,8,F)]),_:2},1024))),128))]),_:1})]),s("div",R,[s("span",U,"浏览次数："+n(t.skuInfo.viewCount),1)]),s("div",null,[s("h3",null,n(t.skuInfo.title),1),s("p",null,n(t.skuInfo.desc),1),i(C,{plain:"",type:"primary"},{default:h(()=>[k(n(t.cate2CodeMap[t.skuInfo.cate2Code]),1)]),_:1}),z,o.skuTransStatus!=null?(c(),u("span",A,"在售状态："+n(this.skuTransStatus),1)):D("",!0),s("span",j,[k("联系电话："),s("a",{href:"tel:"+t.skuInfo.telNumber},"点击呼叫",8,G)]),s("label",{style:{display:"block"},id:"wxId",onClick:e[2]||(e[2]=(...r)=>o.clickCopyWxId&&o.clickCopyWxId(...r))},[k(" 微信账号："),s("a",{onClick:e[1]||(e[1]=L(()=>{},["prevent"])),href:"#"},"点击复制")]),s("span",H,"联系地址："+n(t.addr3CodeMap[t.skuInfo.addr3Code]),1),s("label",J,"商品数量："+n(t.skuInfo.count),1),s("label",K,"期望价格："+n(t.skuInfo.price),1),s("label",O,"发布日期："+n(t.skuInfo.createdDate),1),Q,i(b,{class:"article-text",content:t.skuInfo.article,"expand-text":"展开",rows:"3","collapse-text":"收起"},null,8,["content"])]),s("div",X,[i(g,{offset:t.bubbleStar.offset,"onUpdate:offset":e[3]||(e[3]=r=>t.bubbleStar.offset=r),axis:"xy",onClick:o.followedClick},{default:h(()=>[k(n(o.followed),1)]),_:1},8,["offset","onClick"])]),s("div",null,[i(x,{title:"显示分享面板"}),i(S,{show:t.shareConfig.showShare,"onUpdate:show":e[4]||(e[4]=r=>t.shareConfig.showShare=r),title:"立即分享给好友",options:t.shareConfig.options,onSelect:o.onClickShare},null,8,["show","options","onSelect"])])])):(c(),u("div",Y,[i(y,{description:"商品已下架！"})]))])}const se=M(W,[["render",Z]]);export{se as default};
