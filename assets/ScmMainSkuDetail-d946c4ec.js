import{_ as P,g as r,s as k,q as D,x as p,r as n,o as d,c as f,a,b as o,w as _,t as l,f as h,y as T,F as L,d as N,e as B}from"./index-7a1c71e0.js";const q={data(){return{existSku:!0,skuInfo:{},shareConfig:{showShare:!1,options:[{name:"微信",icon:"wechat",id:"wechat"},{name:"复制链接",icon:"link",id:"link"},{name:"分享海报",icon:"poster",id:"poster"},{name:"二维码",icon:"qrcode",id:"qrcode"}]},bubbleStar:{offset:{x:320,y:620}},cate2CodeMap:{},addr3CodeMap:{}}},methods:{backToParentPage(){this.$router.go(-1)},onClickShareDialog(){this.shareConfig.showShare=!0},onClickShare(c){this.shareConfig.showShare=!1,navigator.clipboard.writeText(window.location)},clickSkuId(){alert("this.$route.params.sku_id = "+this.$route.params.sku_id)},followedClick(){console.log("this.$route.params.sku_id = "+this.$route.params.sku_id),r.followSku(this.$route.params.sku_id,!this.skuInfo.followed).then(c=>{c.data.code===1&&(this.skuInfo.followed=!this.skuInfo.followed)})},clickCopyWxId(){navigator.clipboard.writeText(this.skuInfo.wechatId),k("微信账号复制成功！")},imagePreview(){D({images:this.skuInfo.thumbs,startPosition:1})}},computed:{followed(){return this.skuInfo.followed?"已关注":"关注"}},mounted(){let c=this.$route.params.sku_id;r.skuDetail(c).then(e=>{e.data.code===1&&(e.data.data==null?(k("商品不存在"),this.existSku=!1):this.skuInfo=e.data.data)}),r.metaCate().then(e=>{if(e.data.code===1){let u=e.data.data;this.cate2CodeMap=p.value2TextLevelN(u)}}),r.metaAddr().then(e=>{if(e.data.code===1){let u=e.data.data;this.addr3CodeMap=p.value2TextLevelN(u)}}),r.addSkuEvent(c,1).then(e=>{})}},V={key:0,class:"skuDetail"},W=["src"],E={class:"viewed"},F={class:"viewed-txt"},R=o("hr",null,null,-1),U={style:{display:"block"}},A=["href"],j={style:{display:"block"}},z={style:{display:"block"}},G={style:{display:"block"}},H={style:{display:"block"}},J=o("hr",null,null,-1),K={class:"followed-icon"},O={key:1};function Q(c,e,u,X,t,s){const m=n("van-nav-bar"),v=n("van-swipe-item"),w=n("van-swipe"),b=n("van-tag"),C=n("van-text-ellipsis"),g=n("van-floating-bubble"),x=n("van-cell"),y=n("van-share-sheet"),I=n("van-empty");return d(),f("div",null,[a(m,{title:"详情页","left-text":"返回","right-text":"分享","left-arrow":"",onClickLeft:s.backToParentPage,onClickRight:s.onClickShareDialog},null,8,["onClickLeft","onClickRight"]),t.existSku?(d(),f("div",V,[o("div",null,[a(w,{autoplay:"2000"},{default:_(()=>[(d(!0),f(L,null,N(t.skuInfo.thumbs,(i,S)=>(d(),B(v,{key:S},{default:_(()=>[o("img",{src:i,onClick:e[0]||(e[0]=(...M)=>s.imagePreview&&s.imagePreview(...M))},null,8,W)]),_:2},1024))),128))]),_:1})]),o("div",E,[o("span",F,"浏览次数："+l(t.skuInfo.viewCount),1)]),o("div",null,[o("h3",null,l(t.skuInfo.title),1),o("p",null,l(t.skuInfo.desc),1),a(b,{plain:"",type:"primary"},{default:_(()=>[h(l(t.cate2CodeMap[t.skuInfo.cate2Code]),1)]),_:1}),R,o("label",U,[h("联系电话："),o("a",{href:"tel:"+t.skuInfo.telNumber},"点击呼叫",8,A)]),o("label",{style:{display:"block"},id:"wxId",onClick:e[2]||(e[2]=(...i)=>s.clickCopyWxId&&s.clickCopyWxId(...i))},[h(" 微信账号："),o("a",{onClick:e[1]||(e[1]=T(()=>{},["prevent"])),href:"#"},"点击复制")]),o("label",j,"联系地址："+l(t.addr3CodeMap[t.skuInfo.addr3Code]),1),o("label",z,"商品数量："+l(t.skuInfo.count),1),o("label",G,"期望价格："+l(t.skuInfo.price),1),o("label",H,"发布日期："+l(t.skuInfo.createdDate),1),J,a(C,{class:"article-text",content:t.skuInfo.article,"expand-text":"展开",rows:"3","collapse-text":"收起"},null,8,["content"])]),o("div",K,[a(g,{offset:t.bubbleStar.offset,"onUpdate:offset":e[3]||(e[3]=i=>t.bubbleStar.offset=i),axis:"xy",onClick:s.followedClick},{default:_(()=>[h(l(s.followed),1)]),_:1},8,["offset","onClick"])]),o("div",null,[a(x,{title:"显示分享面板"}),a(y,{show:t.shareConfig.showShare,"onUpdate:show":e[4]||(e[4]=i=>t.shareConfig.showShare=i),title:"立即分享给好友",options:t.shareConfig.options,onSelect:s.onClickShare},null,8,["show","options","onSelect"])])])):(d(),f("div",O,[a(I,{description:"商品已下架！"})]))])}const Z=P(q,[["render",Q]]);export{Z as default};
