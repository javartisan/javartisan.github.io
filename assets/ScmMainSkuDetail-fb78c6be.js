import{_ as L,b as u,s as m,B as N,C as w,r as l,o as r,c as d,a as o,e,w as h,t as a,g as b,i as f,D as B,F as V,f as H,h as W}from"./index-7f48c941.js";import{c as p}from"./constant-de81f5d9.js";const E={data(){return{existSku:!0,skuInfo:{},shareConfig:{showShare:!1,options:[{name:"复制链接",icon:"link",id:"link"},{name:"口令",icon:"lock",id:"token"}]},bubbleStar:{offset:{x:320,y:620}},cate2CodeMap:{},addr3CodeMap:{}}},methods:{backToParentPage(){this.$router.go(-1)},onClickShareDialog(){this.shareConfig.showShare=!0},onClickShare(i){switch(i.id){case"wechat":break;case"link":p.writeHtml5Clipboard(window.location);break;case"poster":break;case"qrcode":break;case"token":p.writeHtml5Clipboard(this.skuInfo.title);break}this.shareConfig.showShare=!1},followedClick(){console.log("this.$route.params.sku_id = "+this.$route.params.sku_id),u.followSku(this.$route.params.sku_id,!this.skuInfo.followed).then(i=>{i.data.code===1?this.skuInfo.followed=!this.skuInfo.followed:m(i.data.message)}).catch(i=>{m("关注失败，稍后重试！")})},clickCopyWxId(){console.log(this.skuInfo.wechatId),p.writeHtml5Clipboard(this.skuInfo.wechatId)},imagePreview(){N({images:this.skuInfo.thumbs,startPosition:1})}},computed:{followed(){return this.skuInfo.followed?"已关注":"关注"},skuStatusTxt(){return p.skuStatusText(this.skuInfo.skuStatus,this.skuInfo.skuTransStatus)}},mounted(){let i=this.$route.params.sku_id;u.skuDetail(i).then(t=>{t.data.code===1&&(t.data.data==null?(m("商品不存在"),this.existSku=!1):this.skuInfo=t.data.data)}).catch(t=>{this.existSku=!1}),u.metaCate().then(t=>{if(t.data.code===1){let k=t.data.data;this.cate2CodeMap=w.value2TextLevelN(k)}}),u.metaAddr().then(t=>{if(t.data.code===1){let k=t.data.data;this.addr3CodeMap=w.value2TextLevelN(k)}}),u.addSkuEvent(i,1).then(t=>{})}},F={key:0,class:"skuDetail"},R={style:{width:"100%",height:"50%"}},U=["src"],q={class:"viewed"},A={class:"viewed-txt"},j=e("hr",null,null,-1),z={key:0},G={style:{display:"block"}},J=["href"],K={style:{display:"block"}},O={style:{display:"block"}},Q={style:{display:"block"}},X={style:{display:"block"}},Y={key:1},Z=e("hr",null,null,-1),$=e("hr",null,null,-1),ee={style:{display:"flex",width:"100%"}},te={style:{flex:1,marginLeft:"2px"}},se={class:"followed-icon"},oe={key:1};function ne(i,t,k,le,s,n){const C=l("van-nav-bar"),g=l("van-swipe-item"),x=l("van-swipe"),y=l("van-tag"),I=l("van-text-ellipsis"),v=l("van-skeleton"),_=l("van-skeleton-paragraph"),S=l("van-floating-bubble"),T=l("van-share-sheet"),D=l("van-empty");return r(),d("div",null,[o(C,{title:"详情页","left-text":"返回","left-arrow":"",onClickLeft:n.backToParentPage,"right-text":"分享",onClickRight:n.onClickShareDialog},null,8,["onClickLeft","onClickRight"]),s.existSku?(r(),d("div",F,[e("div",null,[o(x,{autoplay:"2000"},{default:h(()=>[(r(!0),d(V,null,H(s.skuInfo.thumbs,(c,M)=>(r(),W(g,{key:M},{default:h(()=>[e("div",R,[e("img",{src:c,onClick:t[0]||(t[0]=(...P)=>n.imagePreview&&n.imagePreview(...P)),style:{width:"100%",height:"480px"}},null,8,U)])]),_:2},1024))),128))]),_:1})]),e("div",q,[e("span",A,"浏览次数："+a(s.skuInfo.viewCount),1)]),e("div",null,[e("h3",null,a(s.skuInfo.title),1),e("p",null,a(s.skuInfo.desc),1),o(y,{plain:"",type:"primary"},{default:h(()=>[f(a(s.cate2CodeMap[s.skuInfo.cate2Code]),1)]),_:1}),j,n.skuStatusTxt?(r(),d("span",z,"在售状态："+a(this.skuStatusTxt),1)):b("",!0),e("span",G,[f("联系电话："),e("a",{href:"tel:"+s.skuInfo.telNumber},"点击呼叫",8,J)]),e("label",{style:{display:"block"},id:"wxId",onClick:t[2]||(t[2]=(...c)=>n.clickCopyWxId&&n.clickCopyWxId(...c))},[f(" 微信账号："),e("a",{onClick:t[1]||(t[1]=B(()=>{},["prevent"])),href:"#"},"点击复制")]),e("span",K,"联系地址："+a(s.addr3CodeMap[s.skuInfo.addr3Code]),1),e("label",O,"商品数量："+a(s.skuInfo.count),1),e("label",Q,"期望价格："+a(s.skuInfo.price),1),e("label",X,"发布日期："+a(s.skuInfo.createdDate),1),s.skuInfo.article!=null&&s.skuInfo.article.length>0?(r(),d("div",Y,[Z,o(I,{class:"article-text",content:s.skuInfo.article,"expand-text":"展开",rows:"3","collapse-text":"收起"},null,8,["content"])])):b("",!0),$]),e("div",null,[o(v,null,{template:h(()=>[e("div",ee,[o(v,{title:"",avatar:"",row:3}),e("div",te,[o(_,{"row-width":"60%"}),o(_),o(_),o(_)])])]),_:1})]),e("div",se,[o(S,{offset:s.bubbleStar.offset,"onUpdate:offset":t[3]||(t[3]=c=>s.bubbleStar.offset=c),axis:"xy",onClick:n.followedClick},{default:h(()=>[f(a(n.followed),1)]),_:1},8,["offset","onClick"])]),e("div",null,[o(T,{show:s.shareConfig.showShare,"onUpdate:show":t[4]||(t[4]=c=>s.shareConfig.showShare=c),title:"立即分享给好友",options:s.shareConfig.options,onSelect:n.onClickShare},null,8,["show","options","onSelect"])])])):(r(),d("div",oe,[o(D,{description:"商品走丢，请稍后重试！"})]))])}const ce=L(E,[["render",ne]]);export{ce as default};
